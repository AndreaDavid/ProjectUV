{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "baseCls": null,
        "bodyPadding": 5,
        "cls": [
            "ctn-paneles"
        ],
        "container|align": "stretch",
        "designer|userAlias": "pnl_graficas",
        "designer|userClassName": "pnl_graficas",
        "flex": 1,
        "height": null,
        "id": "pnl_graficas",
        "layout": "vbox",
        "minHeight": null,
        "scrollable": true,
        "width": null
    },
    "name": "MyPanel",
    "configAlternates": {
        "scrollable": "boolean"
    },
    "designerId": "43bce990-8f4b-46a5-ab6a-3863db8c7502",
    "viewControllerInstanceId": "143d9af9-c965-4e50-b6f8-28bf196bb030",
    "viewModelInstanceId": "bd558fa0-758d-4d6c-bbc9-8bdbd2cdd563",
    "cn": [
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "baseCls": "general-panel-header-container",
                "border": null,
                "componentCls": null,
                "container|align": "middle",
                "container|padding": "0 5 0 0",
                "designer|displayName": "ctn_header",
                "disabledCls": null,
                "height": 40,
                "layout": "hbox",
                "layout|flex": null,
                "overCls": null,
                "padding": null,
                "style": [
                    "        {",
                    "        \"background-color\":\"white\"",
                    "        }"
                ],
                "width": null
            },
            "name": "MyContainer12",
            "designerId": "678c083f-92b8-4380-bd22-a07ef26a4c7d",
            "cn": [
                {
                    "type": "Ext.form.Label",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|flex": null,
                        "text": "Highchart"
                    },
                    "name": "MyLabel",
                    "designerId": "cc6a2f43-18fb-4483-bf5b-d809a90e181a"
                }
            ]
        },
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "designer|displayName": "ctn_contenido",
                "flex": null,
                "height": 450,
                "layout": "hbox",
                "layout|flex": null,
                "maxHeight": null,
                "minHeight": null
            },
            "name": "MyContainer11",
            "designerId": "6364f733-e1ca-4f8e-8803-f0bdbf336422",
            "cn": [
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "autoRender": true,
                        "baseCls": "pnl-principal-style",
                        "container|align": "stretch",
                        "designer|createAlias": null,
                        "designer|displayName": "ctn_highchart",
                        "flex": 1,
                        "height": null,
                        "id": "ctn_highchart",
                        "itemId": null,
                        "layout": "hbox",
                        "layout|flex": 1,
                        "maxWidth": 500,
                        "minWidth": 500,
                        "width": 500
                    },
                    "name": "MyContainer15",
                    "designerId": "11251b63-def5-4615-b33c-c8e1e9743230"
                },
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "container|align": "center",
                        "designer|displayName": "chart_pie",
                        "flex": 1,
                        "id": "chart_pie_highchart",
                        "layout": "vbox",
                        "layout|flex": 1
                    },
                    "name": "MyContainer10",
                    "designerId": "c2230e9e-6785-494b-a0ba-62947f602f39",
                    "cn": [
                        {
                            "type": "Ext.form.Label",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "text": "indice UV"
                            },
                            "name": "MyLabel1",
                            "designerId": "9fc01352-2e91-4f98-9d7e-cdd0eedcbc70"
                        },
                        {
                            "type": "Ext.panel.Panel",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 1,
                                "title": "My Panel"
                            },
                            "name": "MyPanel3",
                            "designerId": "b2e6c280-ee5e-456c-926c-a28ec7f80827",
                            "cn": [
                                {
                                    "type": "Ext.form.Label",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "html": null,
                                        "style": [
                                            "{",
                                            "color:\"#119933\",",
                                            "font-weight:\"bold\"",
                                            "",
                                            "}"
                                        ],
                                        "text": "",
                                        "width": null
                                    },
                                    "name": "MyLabel2",
                                    "designerId": "17cca108-beea-4d34-8268-772b0d734724"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "type": "Ext.container.Container",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "container|align": "stretch",
                "flex": null,
                "height": 450,
                "id": "panellinks",
                "layout": "vbox",
                "layout|flex": null,
                "maxHeight": null,
                "minHeight": null
            },
            "name": "MyContainer",
            "designerId": "df391292-9b84-4223-a427-3b8d9f6b184b",
            "cn": [
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "container|align": "stretch",
                        "layout": "hbox",
                        "layout|flex": 1
                    },
                    "name": "MyContainer18",
                    "designerId": "75646daa-91a9-4fa9-a020-e78c52197710",
                    "cn": [
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 2
                            },
                            "name": "MyContainer20",
                            "designerId": "1c51be92-0dbe-4afd-bc8d-3a70631957e2"
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 1
                            },
                            "name": "MyContainer21",
                            "designerId": "ae39fcac-371c-404f-9d05-f8f718dd88f8"
                        }
                    ]
                },
                {
                    "type": "Ext.container.Container",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "container|align": "stretch",
                        "container|pack": "center",
                        "layout": "hbox",
                        "layout|flex": 1
                    },
                    "name": "MyContainer19",
                    "designerId": "bc1e8baa-7c56-4034-9209-a98f49b8334c",
                    "cn": [
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "id": "enlace2",
                                "layout|flex": 1
                            },
                            "name": "MyContainer22",
                            "designerId": "5adc22f9-56b9-4d35-be8b-9ec68952ad2b"
                        },
                        {
                            "type": "Ext.container.Container",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "layout|flex": 1
                            },
                            "name": "MyContainer23",
                            "designerId": "00df52cf-db0b-478f-96eb-511cb1411b2f",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "text": "MyButton"
                                    },
                                    "name": "MyButton6",
                                    "designerId": "0f5e3c9c-b1ee-4c97-b4d5-6ace5a42dd04"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "basicfunction",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "designer|params": [
                            "record"
                        ],
                        "fn": "fn_create_template",
                        "implHandler": [
                            "return Ext.create('Ext.container.Container',{",
                            "    record: record,",
                            "    flex: 1,",
                            "    alignOnScroll: false,",
                            "    baseCls: 'general-template-container',",
                            "    cls: 'ctn-paneles-aplicaciones',",
                            "    height: 150,",
                            "    margin: '10 10 10 10',",
                            "    scrollable: false,",
                            "    width: '',",
                            "    defaultListenerScope: true,",
                            "",
                            "    layout: {",
                            "        type: 'hbox',",
                            "        align: 'stretch',",
                            "        pack: 'center'",
                            "    },",
                            "    items: [",
                            "        {",
                            "            xtype: 'container',",
                            "            flex: 1,",
                            "            layout: {",
                            "                type: 'vbox',",
                            "                align: 'stretch'",
                            "            },",
                            "            items: [",
                            "                {",
                            "                    xtype: 'container',",
                            "                    flex: 1,",
                            "                    layout: {",
                            "                        type: 'vbox',",
                            "                        align: 'center',",
                            "                        pack: 'center'",
                            "                    },",
                            "                    items: [",
                            "                        {",
                            "                            xtype: 'container',",
                            "                            flex: 1",
                            "                        },",
                            "                        {",
                            "",
                            "                            xtype: 'image',",
                            "                            alt:\"app\",",
                            "                            flex: 1,",
                            "                            height: 70,",
                            "                            maxHeight: 70,",
                            "                            maxWidth: 70,",
                            "                            minHeight: 70,",
                            "                            minWidth: 70,",
                            "                            width: 70,",
                            "                            src: \"https://www.nivea.es/-/media/global/advice/sun-protection/uv-radiation/uv-strahlung.jpg\"",
                            "                        },",
                            "                        {",
                            "                            xtype: 'container',",
                            "                            flex: 2,",
                            "                            dock: 'bottom'",
                            "                        }",
                            "                    ]",
                            "                }",
                            "            ]",
                            "        },",
                            "        {",
                            "            xtype: 'container',",
                            "            flex: 2.3,",
                            "            dock: 'top',",
                            "            layout: {",
                            "                type: 'vbox',",
                            "                align: 'stretch'",
                            "            },",
                            "            items: [",
                            "                {",
                            "                    xtype: 'container',",
                            "                    flex: 1,",
                            "                    layout: {",
                            "                        type: 'hbox',",
                            "                        align: 'middle'",
                            "                    },",
                            "                    items: [",
                            "                        {",
                            "                            xtype: 'label',",
                            "                            margin: '2 2 2 0',",
                            "                            baseCls: 'general-nombre-aplicacion-container',",
                            "                            html: \"<b>title</b>\",",
                            "                            text: ''",
                            "                        }",
                            "                    ]",
                            "                },",
                            "                {",
                            "                    xtype: 'label',",
                            "                    flex: 2,",
                            "                    alignOnScroll: false,",
                            "                    dock: 'bottom',",
                            "                    maxWidth: 300,",
                            "                    scrollable: false,",
                            "                    width: 500,",
                            "                    text: \"Tis is a text\"",
                            "                }",
                            "            ]",
                            "        }",
                            "    ]",
                            "});"
                        ]
                    },
                    "name": "fn_create_template",
                    "designerId": "d01863c0-b0b7-4a1b-bf83-4a780d0d6b4a"
                },
                {
                    "type": "basicfunction",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "fn_load_links",
                        "implHandler": [
                            "var templatelink2=this.fn_create_template({",
                            "    titulo:\"noticias UVI\", ",
                            "    abstract:\"lo que sea que deba ir de la noticia en resumen por qeu es asi\",",
                            "    icono:\"url:\"",
                            "    ",
                            "});",
                            "Ext.getCmp(\"enlace2\").add(templatelink2);"
                        ]
                    },
                    "name": "fn_load_links",
                    "designerId": "49dd467a-e836-4333-beb3-0eb50ea943bb"
                },
                {
                    "type": "basiceventbinding",
                    "reference": {
                        "name": "listeners",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fn": "onPanelAfterRender",
                        "implHandler": [
                            "component.fn_load_links();"
                        ],
                        "name": "afterrender",
                        "scope": "me"
                    },
                    "name": "onPanelAfterRender",
                    "designerId": "80ec4781-ee5d-49d0-9751-990dcb7a6edc"
                }
            ]
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "fn_create_linechart",
                "implHandler": [
                    "",
                    "function incluirSerie(a){",
                    "    return a !== 0;",
                    "}",
                    "var store = Ext.getStore('store_data');",
                    "store.load({",
                    "    params:{",
                    "        range:500",
                    "    },",
                    "    callback: function(records, operation, success) {",
                    "        if(records.length>0){",
                    "            var series = [];",
                    "            var data = [];",
                    "            //var fechas =[];",
                    "            for (var r in records){",
                    "                ",
                    "                var fecha = records[r].data.fechaServidor;",
                    "                var arrfecha = fecha.split(\"/\");",
                    "                var fechaParse = Date.UTC(arrfecha[0],arrfecha[1],arrfecha[2],arrfecha[3],arrfecha[4],arrfecha[5]);",
                    "                data.push([fechaParse,parseFloat(records[r].data.lectura)]);",
                    "                //fechas.push(fechaParse);",
                    "                ",
                    "                //data.push(r,r*r);",
                    "            }",
                    "",
                    "            series.push({",
                    "                name: \"lectura\",",
                    "                data: data,",
                    "                color:'#a9d479',",
                    "                visible: false",
                    "            });",
                    "",
                    "",
                    "            Highcharts.setOptions({",
                    "                lang: {",
                    "                    months: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',  'Julio', 'Aagosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],",
                    "                    weekdays: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],",
                    "                    downloadJPEG:\"Descargar JPEG\",",
                    "                    downloadPNG:\"Descargar PNG\",",
                    "                    downloadPDF:\"Descargar PDF\",",
                    "                    downloadSVG:\"Descargar SVG\",",
                    "                    loading:\"Cargando..\",",
                    "                    printChart:\"Imprimir Chart\",",
                    "                    resetZoom:\"Resetear Zoom\",",
                    "                    resetZoomTitle:\"Resetear Zoom nivel 1:1\",",
                    "                    noData:\"No existen datos para mostrar\"",
                    "",
                    "                }",
                    "            });",
                    "",
                    "",
                    "            Highcharts.chart(\"ctn_highchart-targetEl\", {",
                    "                chart: {",
                    "                    type: 'areaspline'",
                    "                },",
                    "                title: {",
                    "                    text: '<label style=\"font-size: 20px; font-family: Fira Sans, serif; font-weight: 600;\">Aplicaciones en uso</label>'",
                    "                },",
                    "                legend: {",
                    "                    layout: 'vertical',",
                    "                    align: 'right',",
                    "                    verticalAlign: 'middle',",
                    "                    width: 150",
                    "                },",
                    "                xAxis: {",
                    "                    plotBands: [{",
                    "",
                    "                        color: 'rgba(68, 170, 213, .2)'",
                    "                    }]",
                    "                },",
                    "                yAxis: {",
                    "                    title: {",
                    "                        text: ''",
                    "                    }",
                    "                },",
                    "                tooltip: {",
                    "                    shared: true,",
                    "                    valueSuffix: ' UvIndex'",
                    "                },",
                    "                credits: {",
                    "                    enabled: false",
                    "                },",
                    "                plotOptions: {",
                    "                    areaspline: {",
                    "                        fillOpacity: 0.5",
                    "                    }",
                    "                },",
                    "                series: series",
                    "            });",
                    "",
                    "        }",
                    "    }",
                    "});"
                ]
            },
            "name": "fn_create_linechart",
            "designerId": "a027fd7e-cc52-49db-a211-be4e16cbaf35"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "records"
                ],
                "fn": "fn_create_piechart",
                "implHandler": [
                    "var data=[];",
                    "var total=0;",
                    "for(var a in records[0].data.cantidad){",
                    "    total = total+records[0].data.cantidad[a];",
                    "}",
                    "var colors=records[0].data.colores;",
                    "for(var m in records[0].data.eventos){",
                    "    var data1= {",
                    "        color:colors[m],",
                    "        drilldown: {",
                    "            name: records[0].data.eventos[m],",
                    "            categories: [records[0].data.eventos[m]],",
                    "            data: [parseFloat(Math.round((100*records[0].data.cantidad[m]/total).toFixed(2)))],",
                    "            cantidad:records[0].data.cantidad[m],",
                    "            color: colors[m]",
                    "        }",
                    "    };",
                    "    data.push(data1);",
                    "}",
                    "var colors = records[0].data.colores,",
                    "    versionsData = [],",
                    "    i,",
                    "    j,",
                    "    dataLen = data.length,",
                    "    drillDataLen,",
                    "    brightness;",
                    "",
                    "",
                    "for (i = 0; i < dataLen; i += 1) {",
                    "    drillDataLen = data[i].drilldown.data.length;",
                    "    for (j = 0; j < drillDataLen; j += 1) {",
                    "        brightness = - (j / drillDataLen) / 5;",
                    "        versionsData.push({",
                    "            name: data[i].drilldown.categories[j],",
                    "            porcentaje: data[i].drilldown.data[j],",
                    "            y:data[i].drilldown.cantidad,",
                    "            color: Highcharts.Color(data[i].color).brighten(brightness).get()",
                    "        });",
                    "    }",
                    "}",
                    "Highcharts.setOptions({",
                    "    lang: {",
                    "\t\tmonths: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',  'Julio', 'Aagosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],",
                    "\t\tweekdays: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],",
                    "        downloadJPEG:\"Descargar JPEG\",",
                    "        downloadPNG:\"Descargar PNG\",",
                    "        downloadPDF:\"Descargar PDF\",",
                    "        downloadSVG:\"Descargar SVG\",",
                    "        loading:\"Cargando..\",",
                    "        printChart:\"Imprimir Chart\",",
                    "        resetZoom:\"Resetear Zoom\",",
                    "        resetZoomTitle:\"Resetear Zoom nivel 1:1\",",
                    "        noData:\"No existen datos para mostrar\"",
                    "",
                    "    }",
                    "});",
                    "Highcharts.chart('chart_pie_highchart', {",
                    "    chart: {",
                    "        type: 'pie'",
                    "    },",
                    "    title: {",
                    "        margin:0,",
                    "        useHTML:true,",
                    "        text: '<div style=\"text-align: center;\"><div style=\"font-weight:bold; font-size:25px\">Gráfico de Dona</div><div>Track vs Total</div></div>'",
                    "    },",
                    "    subtitle: {",
                    "        y:28,",
                    "        useHTML:true,",
                    "        verticalAlign:\"middle\",",
                    "        text: '<div style=\"text-align: center;\"><div style=\"font-weight:bold; font-size:15px\">Total</div><div>'+total+'</div></div>'",
                    "    },",
                    "    yAxis: {",
                    "        title: {",
                    "            text: 'Total percent market share'",
                    "        }",
                    "    },",
                    "    plotOptions: {",
                    "        pie: {",
                    "            shadow: false,",
                    "            center: ['50%', '50%']",
                    "        }",
                    "    },",
                    "    credits: {",
                    "        enabled: false",
                    "    },",
                    "    series: [",
                    "        {",
                    "            name: 'cantidad',",
                    "            data: versionsData,",
                    "            size: '50%',",
                    "            innerSize: '60%',",
                    "            dataLabels: {",
                    "                formatter: function () {",
                    "                    // display only if larger than 1",
                    "                    return '<b>' + this.point.name + ':</b> ' +",
                    "                        this.point.options.porcentaje + '%';",
                    "                }",
                    "            },",
                    "            id: 'versions'",
                    "        }],",
                    "    responsive: {",
                    "        rules: [{",
                    "            condition: {",
                    "                maxWidth: 400,",
                    "                marginBottom:20",
                    "            },",
                    "            chartOptions: {",
                    "                series: [{",
                    "                    id: 'versions',",
                    "                    dataLabels: {",
                    "                        enabled: false",
                    "                    }",
                    "                }]",
                    "            }",
                    "        }]",
                    "    }",
                    "});"
                ]
            },
            "name": "fn_create_piechart",
            "designerId": "f1541739-6cfc-4752-a80c-961679201c33"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPnl_highchartRender",
                "implHandler": [
                    "this.fn_create_linechart();"
                ],
                "name": "render",
                "scope": "me"
            },
            "name": "onPnl_highchartRender",
            "designerId": "b746a8af-4ddd-48ff-8b9d-856542bc993c"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "records"
                ],
                "fn": "make_csv_linechart",
                "implHandler": [
                    "",
                    "var ctx = Ext.getCmp('ctn_chartjs_line');",
                    "var datasets=[];",
                    "var dt = records[0].data.datasets;",
                    "var csv=\"\";",
                    "var colores=[];",
                    "var header=\"\\n\";",
                    "header+=\"dia\";",
                    "for(var h in dt){",
                    "    colores.push({color:dt[h].borderColor});",
                    "    header+=\",\";",
                    "    header+=dt[h].label;",
                    "}",
                    "header+=\"\\n\";",
                    "csv+=header;",
                    "for(var r in records[0].data.fechas){",
                    "    var row=records[0].data.fechas[r];",
                    "    for(var data in dt){",
                    "        row+=\",\";",
                    "        row+=dt[data].cantidad[r];",
                    "    }",
                    "    row+=\"\\n\";",
                    "    csv+=row;",
                    "}",
                    "",
                    "return [csv,colores];"
                ]
            },
            "name": "make_csv_linechart",
            "designerId": "0c516a6f-2daf-48d9-a24a-33794bc476c8"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "fn_reload_piechart_store",
                "implHandler": [
                    "var store = Ext.getStore('Store_Estados_Track');",
                    "var records = store.data.items;",
                    "this.fn_create_piechart(records);",
                    ""
                ]
            },
            "name": "fn_reload_piechart_store",
            "designerId": "24c54b3f-bd37-4322-b292-d2bbac48b361"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "fn_reload_linechart_store",
                "implHandler": [
                    "var store = Ext.getStore('Store_Track');",
                    "var records =store.data.items;",
                    "this.fn_create_linechart(records);"
                ]
            },
            "name": "fn_reload_linechart_store",
            "designerId": "8a48623c-b329-4cbc-83ec-23f9cbd669ec"
        }
    ]
}